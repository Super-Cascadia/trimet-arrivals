(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,a){},131:function(e,t,a){"use strict";a.d(t,"a",function(){return f});var n=a(45),r=a(46),o=a(48),i=a(47),c=a(49),l=a(116),s=a.n(l),u=a(1),d=a.n(u),m=a(115),v=a.n(m),h=a(24);a(134);var f=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).onClick=void 0,a.onClick=function(){return a.props.onClick(a.props.route)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.routeId,a=e.className,n=e.verbose,r=function(e,t){var a={"route-indicator-blue":e===h.c,"route-indicator-cyan":e===h.h||e===h.j,"route-indicator-green":e===h.d,"route-indicator-lightgreen":e===h.k,"route-indicator-orange":e===h.e,"route-indicator-pink":e===h.i,"route-indicator-red":e===h.f,"route-indicator-yellow":e===h.l};return s()("route-indicator",t,a)}(t,a);return d.a.createElement("span",{className:r,onClick:this.onClick},function(e,t){var a=h.g[e];return a?d.a.createElement("span",null,d.a.createElement(v.a,{name:"train",className:"train-route-indicator"}),d.a.createElement("span",null,a)):e?d.a.createElement("span",null,d.a.createElement(v.a,{name:"bus",className:"train-route-indicator"}),d.a.createElement("span",null,e," ",t&&"Bus")):e||"-"}(t,n))}}]),t}(d.a.PureComponent)},133:function(e,t,a){},134:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(50),o=a(128),i=a(117),c=Object(i.a)(function(e,t){return e.arrivalsReducer.loading[t]},function(e){return e}),l=Object(i.a)(function(e,t){return e.arrivalsReducer.arrivals[t]},function(e){return e}),s=a(129),u=a(45),d=a(46),m=a(48),v=a(47),h=a(49),f=a(1),p=a.n(f),b=a(37),k=a.n(b),O=(a(148),a(51)),j=(a(130),a(116)),E=a.n(j),C=a(8);a(133);function I(e,t){var a=e.diff(t);return{seconds:k()(a).seconds(),minutes:k()(a).minutes()}}function w(e,t){return{minutesDiff:59-e,secondsDiff:60-t}}var y=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.scheduled,a=e.estimated;if(t&&a){var n=I(a,t),r=n.seconds,o=n.minutes,i=w(o,r),c=i.secondsDiff;return 0===i.minutesDiff?p.a.createElement("span",{className:"arrival-estimated-early"},c,"s early"):p.a.createElement("span",{className:"arrival-estimated-early"},59-o,"m ",60-r,"s early")}return"-"}}]),t}(p.a.PureComponent),g=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.scheduled,a=e.estimated;if(t&&a){var n=I(t,a),r=n.seconds,o=w(n.minutes,r),i=o.secondsDiff,c=o.minutesDiff;return 0===c?p.a.createElement("span",{className:"arrival-estimated-late"},i,"s late"):p.a.createElement("span",{className:"arrival-estimated-late"},c,"m ",i,"s late")}return"-"}}]),t}(p.a.PureComponent);function N(e){var t=e.scheduled,a=e.estimated;return t&&a?function(e,t){return e.isSame(t)}(t,a)?p.a.createElement("span",{className:"arrival-on-time"}," On time"):function(e,t){return t.isBefore(e)}(t,a)?p.a.createElement(y,{scheduled:t,estimated:a}):p.a.createElement(g,{scheduled:t,estimated:a}):null}var D=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.estimated,a=e.now;if(t&&a){var n=I(t,a),r=n.seconds,o=n.minutes;return 0===o?"".concat(r,"s"):"".concat(o,"m ").concat(r,"s")}return"-"}}]),t}(p.a.PureComponent),A=a(131);var L=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.scheduled,n=e.estimated,r=e.feet,o=e.routeId,i=e.shortSign,c=e.now,l=e.onRouteIndicatorClick,s=e.route,u=k()(a),d=k()(n),m=function(e){return e&&e<5280?5280/e:e&&e/5280}(r);return p.a.createElement("tr",null,p.a.createElement("td",{className:"route-indicator-column"},p.a.createElement(A.a,{routeId:o,onClick:l,route:s})),p.a.createElement("td",{className:"short-sign"},i),p.a.createElement("td",null,p.a.createElement(D,{estimated:d,now:c})),p.a.createElement("td",null,p.a.createElement(N,{scheduled:u,estimated:d})),p.a.createElement("td",{className:"estimated-scheduled-time"},t.getEstimatedScheduledTime(u,d)),p.a.createElement("td",{className:"distance-in-miles"},Math.round(m)," miles"))}}],[{key:"getEstimatedScheduledTime",value:function(e,t){var a=e.format("h:mm:ss a"),n=t.format("h:mm:ss a");return"".concat(n," / ").concat(a)}}]),t}(p.a.Component);function S(e,t){return e.find(function(e){return e.route===t})}var R=function(e){function t(e){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).call(this,e))}return Object(h.a)(t,e),Object(d.a)(t,null,[{key:"getRows",value:function(e,t,a,n,r){return function(e,t){return t?e:e.slice(0,5)}(function(e){return Object(C.sortBy)(e,function(e){return e.estimated})}(e),r).map(function(e){var r=e.scheduled,o=e.estimated,i=e.feet,c=e.route,l=e.shortSign,s=e.id;return p.a.createElement(L,{key:s,estimated:o,feet:i,scheduled:r,routeId:c,shortSign:l,now:t,route:S(n.route,c),onRouteIndicatorClick:a})})}}]),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.arrivals,n=e.now,r=e.onClick,o=e.stopLocation,i=e.showAllArrivals;return p.a.createElement("tbody",null,t.getRows(a,n,r,o,i))}}]),t}(p.a.Component),M=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrivals,a=e.loading,n=e.now,r=e.onRouteIndicatorClick,o=e.stopLocation,i=e.showMore;if(!t)return null;var c=E()("arrivals-table",{"arrivals-loading":a});return p.a.createElement("table",{className:c},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null),p.a.createElement("th",null,"Name"),p.a.createElement("th",null,"Arrival"),p.a.createElement("th",null,"On Time"),p.a.createElement("th",null,"Estimated / Scheduled"),p.a.createElement("th",null,"Distance"))),p.a.createElement(R,{arrivals:t,onClick:r,stopLocation:o,now:n,showAllArrivals:i}))}}]),t}(p.a.Component),B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).state={showMore:!1},a.toggleShowMore=a.toggleShowMore.bind(Object(O.a)(Object(O.a)(a))),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.arrivals,a=e.loading,n=void 0===a||a,r=e.now,o=e.onRouteIndicatorClick,i=e.stopLocation,c=this.state.showMore,l=t&&t.length;return p.a.createElement("div",{className:"arrivals-wrapper"},p.a.createElement(M,{arrivals:t,loading:n,now:r,onRouteIndicatorClick:o,stopLocation:i,showMore:c}),l>5&&this.showLoadMoreControl(c,l))}},{key:"showLoadMoreControl",value:function(e,t){var a=t-5;return p.a.createElement("div",{className:"arrivals-load-more-control"},p.a.createElement("div",{className:"load-more-flex-container"},e&&p.a.createElement("button",{onClick:this.toggleShowMore},"Only show 5 arrivals"),!e&&p.a.createElement("button",{onClick:this.toggleShowMore},"Show ",a," more arrivals")))}},{key:"toggleShowMore",value:function(){this.setState({showMore:!this.state.showMore})}}]),t}(p.a.Component),x=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadArrivalData,a=e.locationId;e.showArrivals&&t(a)}},{key:"render",value:function(){var e=this.props,t=e.arrivals,a=e.loading,n=void 0===a||a,r=e.showArrivals,o=void 0===r||r,i=e.now,c=e.onRouteIndicatorClick,l=e.stopLocation;return p.a.createElement("div",{className:"arrivals-wrapper"},!n&&o&&!t&&p.a.createElement("p",{className:"no-arrivals"},"No arrivals available."),o&&t&&p.a.createElement(B,{arrivals:t,loading:n,now:i,onRouteIndicatorClick:c,stopLocation:l}))}}]),t}(p.a.Component),P=Object(r.b)(function(e,t){var a=t.locationId,r=k()();return Object(n.a)({},t,{arrivals:l(e,a),loading:c(e,a),locationId:a,now:r})},function(){return{}})(x),T=(a(125),a(6)),z=a(127),J=a(126),U=a(118),W=a(115),q=a.n(W);a(149);function F(e){var t=e.onBookmarkClick,a=e.stopLocation,n=e.stopIsBookmarked,r=void 0!==n&&n,o=t&&t.bind(this,a,r);return p.a.createElement("div",{className:"bookmark-button-container"},p.a.createElement("button",{onClick:o,className:"bookmark-button"},function(e){if(e)return p.a.createElement(q.a,{className:"bookmarked",name:"bookmark",color:"red",style:{color:"red"}});return p.a.createElement(q.a,{className:"not-bookmarked",name:"bookmark"})}(r)))}var G=Object(r.b)(function(e,t){return Object(n.a)({},t,{bookmarkSections:Object(J.b)(e),stopIsBookmarked:Object(U.e)(e,t.locationId)})},function(e){return{onBookmarkClick:function(t,a){e(a?{payload:{locationId:t.locid},type:T.n}:function(e){return{payload:{stopLocation:e},type:T.a}}(t))},onBookmarkSectionSelect:function(t,a){e(Object(z.b)(t,a))}}})(function(e){var t=e.onBookmarkClick,a=e.stopLocation,n=e.stopIsBookmarked,r=e.bookmarkSections,o=e.onBookmarkSectionSelect;return p.a.createElement(F,{onBookmarkClick:t,stopLocation:a,stopIsBookmarked:n,bookmarkSections:r,onBookmarkSectionSelect:o})}),H=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).onClick=void 0,a.onClick=function(t){return e.onClick(t)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,a=e.className,n=e.children,r=E()("reload-button",a);return p.a.createElement("button",{disabled:t,title:"Reload arrivals for stop",className:r,onClick:this.onClick},t&&p.a.createElement(q.a,{name:"refresh",spin:!0,size:"2x"}),!t&&p.a.createElement(q.a,{name:"refresh",size:"2x"}),n)}}]),t}(p.a.PureComponent),K=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).refreshInterval=void 0,a.onClick=void 0,a.state={interval:30},a.onClick=function(e){return a.onReloadClick(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.showArrivals&&this.setNewInterval()}},{key:"componentWillUnmount",value:function(){this.props.showArrivals&&this.clearIntervalListener()}},{key:"onInterval",value:function(){var e=this.state.interval;0===e?this.loadData():this.setState({interval:e-1})}},{key:"setNewInterval",value:function(){var e=this;this.refreshInterval=setInterval(function(){return e.onInterval()},1e3)}},{key:"clearIntervalListener",value:function(){this.refreshInterval&&clearInterval(this.refreshInterval)}},{key:"resetLoadCounter",value:function(){this.clearIntervalListener(),this.setState({interval:30})}},{key:"loadData",value:function(){var e=this.props,t=e.loadArrivalData,a=e.stopLocation;this.resetLoadCounter(),this.setNewInterval(),t(a.locid)}},{key:"onReloadClick",value:function(e){e.preventDefault(),this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.stopLocation,a=e.loading,n=e.showArrivals,r=void 0===n||n;return t?p.a.createElement("div",{className:"stops-reload-button"},r&&p.a.createElement(H,{onClick:this.onClick,disabled:a},p.a.createElement("span",{className:"count-down-label"},this.state.interval))):null}}]),t}(p.a.Component);a(150);function Q(e){var t=e.locationId;return p.a.createElement("span",{className:"stop-location-indicator"},t)}a(151),a(152);var V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).state={expanded:!1},a.toggleDetails=a.toggleDetails.bind(Object(O.a)(Object(O.a)(a))),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"toggleDetails",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this.props,t=e.routes,a=e.onClick;return this.state.expanded?p.a.createElement("div",null,p.a.createElement("button",{onClick:this.toggleDetails},"Details"),p.a.createElement("ul",{className:"route-detail-list"},function(e,t){return Object(C.map)(e,function(e){var a=Object(C.split)(e.desc,"-")[1];return p.a.createElement("li",{className:"route-detail-list-item"},p.a.createElement(A.a,{key:e.route,routeId:e.route,route:e,onClick:t,className:"header-router-indicator"}),p.a.createElement("span",{className:"route-description"},p.a.createElement("span",null,a),p.a.createElement("span",{className:"route-description-divider"},"-"),p.a.createElement("span",null,e.dir[0].desc)))})}(t,a))):p.a.createElement("div",null,p.a.createElement("span",{className:"serving-label"},"Routes: "),p.a.createElement("span",{className:"route-indicators"},function(e,t){return Object(C.map)(e,function(e){return p.a.createElement(A.a,{key:e.route,routeId:e.route,route:e,onClick:t,className:"header-router-indicator"})})}(t,a)),p.a.createElement("button",{onClick:this.toggleDetails},"Details"))}}]),t}(f.Component);function X(e){var t=e.stopLocation,a=e.onClick;return t?p.a.createElement("div",{className:"stop-info-header"},p.a.createElement("h2",null,p.a.createElement(Q,{locationId:t.locid}),p.a.createElement("span",{className:"stop-info"},t.desc," - ",t.dir," -"),p.a.createElement("span",null,t.distance," feet away")),p.a.createElement(V,{routes:t.route,onClick:a})):null}a(153);function Y(e){var t=e.stopLocation,a=e.loading,n=e.showArrivals,r=e.loadArrivalData,o=e.onRouteIndicatorClick,i=e.locationId;if(!t)return null;var c=E()("stops-header",{"arrivals-hidden":!n});return p.a.createElement("div",{className:c},p.a.createElement(X,{stopLocation:t,onClick:o}),p.a.createElement("div",{className:"stop-control-section"},p.a.createElement(G,{locationId:i,stopLocation:t}),p.a.createElement(K,{stopLocation:t,loadArrivalData:r,loading:a,showArrivals:n})))}var Z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).refreshInterval=void 0,a.loadArrivalData=void 0,a.loadArrivalData=function(e){return a.loadArrivals(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"loadAndSetInterval",value:function(e){var t=this.props.loadArrivalData;t(e),this.refreshInterval=setInterval(t(e),3e4)}},{key:"loadArrivals",value:function(e){this.refreshInterval&&clearInterval(this.refreshInterval),this.loadAndSetInterval(e)}},{key:"render",value:function(){var e=this.props,t=e.stopLocation,a=e.locationId,n=e.loading,r=e.showArrivals,o=e.onRouteIndicatorClick;return p.a.createElement("article",{className:"stop"},p.a.createElement(Y,{stopLocation:t,loadArrivalData:this.loadArrivalData,loading:n,showArrivals:r,onRouteIndicatorClick:o,locationId:a}),r&&p.a.createElement(P,{locationId:a,showArrivals:r,loadArrivalData:this.loadArrivalData,onRouteIndicatorClick:o,stopLocation:t}))}}]),t}(p.a.Component),$=Object(r.b)(function(e,t){return Object(n.a)({},t,{loading:c(e,t.locationId),stopLocation:Object(s.c)(e,t.locationId)})},function(e){return{loadArrivalData:function(t){e(Object(o.a)(t))}}})(Z);t.default=$},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){}}]);
//# sourceMappingURL=0.23afb37a.chunk.js.map