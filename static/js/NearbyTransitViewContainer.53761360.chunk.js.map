{"version":3,"sources":["../node_modules/reselect/es/index.js","store/selectors/bookmarkSelectors.ts","component/loadIndicator/ComponentLoadIndicator.tsx","store/action/stopActions.ts","store/selectors/stopSelectors.ts","store/action/viewActions.ts","store/selectors/locationSelectors.ts","component/modal/Modal.tsx","component/modal/ModalContent.tsx","view/stops/components/NearbyTransitViewComponent.tsx","component/loadIndicator/MapLoadIndicator.tsx","view/stops/containers/NearbyTransitViewContainer.tsx"],"names":["defaultEqualityCheck","a","b","__webpack_require__","d","__webpack_exports__","createSelector","memoize","_len","arguments","length","memoizeOptions","Array","_key","_len2","funcs","_key2","recomputations","resultFunc","pop","dependencies","isArray","every","dep","dependencyTypes","map","join","Error","getDependencies","memoizedResultFunc","apply","undefined","concat","selector","params","i","push","resetRecomputations","createSelectorCreator","func","equalityCheck","lastArgs","lastResult","prev","next","areArgumentsShallowlyEqual","selectBookmarks","bookmarkedStopLocationsSelector","bookmarkedStopLocationSelector","bookmarkCountSelector","stopIsBookmarkedSelector","lodash__WEBPACK_IMPORTED_MODULE_0__","reselect__WEBPACK_IMPORTED_MODULE_1__","state","bookmarksReducer","bookmarks","stopLocation","isEmpty","Object","keys","locationId","ComponentLoadIndicator","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_fontawesome__WEBPACK_IMPORTED_MODULE_1__","react_fontawesome__WEBPACK_IMPORTED_MODULE_1___default","createElement","className","name","size","spin","loadArrivalDataRequest","loadStopDataRequest","_constants__WEBPACK_IMPORTED_MODULE_0__","payload","type","LOAD_ARRIVALS_DATA_REQUEST","radiusInFeet","LOAD_STOP_DATA_REQUEST","stopsLoadingSelector","allStopLocationsSelector","allNearbyRoutesSelector","timeOfLastLoadSelector","stopLocationSelector","reselect__WEBPACK_IMPORTED_MODULE_0__","stopsReducer","loading","stopLocations","nearbyRoutes","timeOfLastLoad","onInitialLoadRequest","INITIAL_LOAD_REQUEST","currentLocationSelector","currentLocationReducer","coordinates","Modal","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","modalRoot","el","document","getElementById","appendChild","removeChild","ReactDOM","createPortal","children","React","Component","getSection","route","react_default","desc","dir","key","ModalContent","_ref","closeModal","onClick","title","lib_default","getHeader","NearbyStopsMap","lazy","Promise","all","e","then","bind","MainNavigation","NearbyLists","NearbyTransitViewComponent","modalOpen","routeInfo","openModal","assertThisInitialized","onInitialLoad","loadStopData","_this$props","numberOfBookmarks","getNearbyStops","setState","_this$props2","_this$props2$loading","id","nearbyStops","_this$props3","currentLocation","react","fallback","showModal","Modal_Modal","NearbyTransitViewContainer","connect","dispatch"],"mappings":"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","file":"static/js/NearbyTransitViewContainer.53761360.chunk.js","sourcesContent":["function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n  var length = prev.length;\n\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n  var lastArgs = null;\n  var lastResult = null; // we reference arguments instead of spreading them for performance reasons\n\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      return memoizedResultFunc.apply(null, params);\n    });\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n\n    selector.recomputations = function () {\n      return recomputations;\n    };\n\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n\n    return selector;\n  };\n}\nexport var createSelector = createSelectorCreator(defaultMemoize);\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import { isEmpty, map } from \"lodash\";\nimport { createSelector } from \"reselect\";\nimport { StopLocation } from \"../../api/trimet/types\";\nimport { RootState } from \"../reducers\";\nimport { StopLocations } from \"../reducers/bookmarksReducer\";\n\nexport const selectBookmarks = (state: RootState) =>\n  state.bookmarksReducer.bookmarks;\nconst selectBookmarkedStop = (state: RootState, locationId: number) =>\n  state.bookmarksReducer.bookmarks[locationId];\n\nexport const bookmarkedStopLocationsSelector = createSelector(\n  selectBookmarks,\n  (bookmarks: StopLocations) => bookmarks\n);\n\nexport const bookmarkedStopLocationSelector = createSelector(\n  selectBookmarks,\n  (bookmarks: StopLocations) =>\n    map(bookmarks, (stopLocation: StopLocation) => stopLocation)\n);\n\nexport const bookmarkCountSelector = createSelector(\n  selectBookmarks,\n  (bookmarks: StopLocations) =>\n    !isEmpty(bookmarks) && Object.keys(bookmarks).length\n);\n\nexport const stopIsBookmarkedSelector = createSelector(\n  selectBookmarkedStop,\n  (stopLocation: StopLocation) => !isEmpty(stopLocation)\n);\n","import React from \"react\";\nimport FontAwesome from \"react-fontawesome\";\nimport \"./RouteLoadIndicator.scss\";\n\nexport default function ComponentLoadIndicator() {\n  return (\n    <div className=\"load-indicator component-indicator\">\n      <FontAwesome name=\"spinner\" size=\"lg\" spin={true} />\n      Loading component!\n    </div>\n  );\n}\n","import {\n  LOAD_ARRIVALS_DATA_REQUEST,\n  LOAD_STOP_DATA_REQUEST,\n  UPDATE_VIEW_REQUEST\n} from \"../constants\";\n\nexport type LoadStopData = (radiusInFeet: number) => void;\nexport type LoadArrivalData = (locationId: number) => void;\n\nexport const loadArrivalDataRequest = (locationId: number) => ({\n  payload: { locationId },\n  type: LOAD_ARRIVALS_DATA_REQUEST\n});\n\nexport const loadStopDataRequest = (radiusInFeet: number) => ({\n  payload: { radiusInFeet },\n  type: LOAD_STOP_DATA_REQUEST\n});\n\nexport const changeViewRequest = (view: string) => ({\n  payload: { view },\n  type: UPDATE_VIEW_REQUEST\n});\n","import { createSelector } from \"reselect\";\nimport { StopLocation } from \"../../api/trimet/types\";\nimport { RootState } from \"../reducers\";\nimport {\n  RouteDirection,\n  RouteDirectionDict\n} from \"../reducers/util/getRoutesFromStopLocations\";\n\nconst allStopLocations = (state: RootState) => state.stopsReducer.stopLocations;\nconst allNearbyRoutes = (state: RootState) => state.stopsReducer.nearbyRoutes;\n\nconst stopLocationByLocationId = (state: RootState, locationId: number) =>\n  state.stopsReducer.stopLocations[locationId];\n\nconst stopsLoading = (state: RootState) => state.stopsReducer.loading;\n\nconst stopTimeOfLastLoadReducer = (state: RootState) =>\n  state.stopsReducer.timeOfLastLoad;\n\nexport const stopsLoadingSelector = createSelector(\n  stopsLoading,\n  (loading: boolean) => loading\n);\n\nexport const allStopLocationsSelector = createSelector(\n  allStopLocations,\n  (stopLocations: StopLocation[]) => stopLocations\n);\n\nexport const allNearbyRoutesSelector = createSelector(\n  allNearbyRoutes,\n  (nearbyRoutes: RouteDirectionDict) => nearbyRoutes\n);\n\nexport const timeOfLastLoadSelector = createSelector(\n  stopTimeOfLastLoadReducer,\n  (timeOfLastLoad: string) => timeOfLastLoad\n);\n\nexport const stopLocationSelector = createSelector(\n  stopLocationByLocationId,\n  (stopLocation: StopLocation) => stopLocation\n);\n","import { CHANGE_VIEW_REQUEST, INITIAL_LOAD_REQUEST } from \"../constants\";\n\nexport const changeViewRequest = (activeView: string) => ({\n  payload: { activeView },\n  type: CHANGE_VIEW_REQUEST\n});\n\nexport const onInitialLoadRequest = () => ({\n  type: INITIAL_LOAD_REQUEST\n});\n","import { createSelector } from \"reselect\";\nimport { RootState } from \"../reducers\";\n\nconst currentLocation = (state: RootState) => {\n  return state.currentLocationReducer.coordinates;\n};\n\nexport const currentLocationSelector = createSelector(\n  currentLocation,\n  (coordinates: number[]) => coordinates\n);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./Modal.css\";\n\nexport default class Modal extends React.Component<{}> {\n  private modalRoot: HTMLElement;\n  private el: HTMLDivElement;\n\n  constructor(props) {\n    super(props);\n    this.el = document.createElement(\"div\");\n  }\n\n  public componentDidMount() {\n    this.modalRoot = document.getElementById(\"modal-root\");\n    this.modalRoot.appendChild(this.el);\n  }\n\n  public componentWillUnmount() {\n    this.modalRoot.removeChild(this.el);\n  }\n\n  public render() {\n    return ReactDOM.createPortal(this.props.children, this.el);\n  }\n}\n","import React from \"react\";\nimport FontAwesome from \"react-fontawesome\";\nimport { Direction, Route } from \"../../api/trimet/types\";\n\ninterface Props {\n  route: Route;\n  closeModal: () => void;\n}\n\nfunction getHeader(closeModal: () => void) {\n  return (\n    <header className=\"info-header\">\n      <h4>Route Info</h4>\n      <div className=\"close-button-container\">\n        <button onClick={closeModal} name=\"Close\" title=\"Close\">\n          <FontAwesome name=\"times\" />\n        </button>\n      </div>\n    </header>\n  );\n}\n\nfunction getRouteDirections(routeDirections: Direction[]) {\n  return routeDirections.map((route: Direction) => {\n    return (\n      <ul key={route.dir}>\n        <li>\n          {route.desc} | {route.dir}\n        </li>\n      </ul>\n    );\n  });\n}\n\nfunction getSection(route: Route) {\n  if (!route) {\n    return null;\n  }\n\n  return (\n    <section>\n      <h5>{route.desc}</h5>\n      <p>Type: {route.type}</p>\n      <h4>Directions:</h4>\n      {getRouteDirections(route.dir)}\n    </section>\n  );\n}\n\nexport default function ModalContent({ route, closeModal }: Props) {\n  return (\n    <div className=\"modal-content\">\n      {getHeader(closeModal)}\n      {getSection(route)}\n    </div>\n  );\n}\n","import React, { lazy, Suspense } from \"react\";\nimport { Route } from \"../../../api/trimet/types\";\nimport ComponentLoadIndicator from \"../../../component/loadIndicator/ComponentLoadIndicator\";\nimport MapLoadIndicator from \"../../../component/loadIndicator/MapLoadIndicator\";\nimport Modal from \"../../../component/modal/Modal\";\nimport ModalContent from \"../../../component/modal/ModalContent\";\nimport { LoadStopData } from \"../../../store/action/stopActions\";\nimport { StopLocationsDictionary } from \"../../../store/reducers/stopsReducer\";\nimport { RouteDirectionDict } from \"../../../store/reducers/util/getRoutesFromStopLocations\";\nimport \"../Stops.scss\";\n\nconst NearbyStopsMap = lazy(() =>\n  import(\n    /* webpackChunkName: \"NearbyStopsMap\" */ \"../../../component/maps/NearbyStopsMap\"\n  )\n);\nconst MainNavigation = lazy(() =>\n  import(\n    /* webpackChunkName: \"MainNavigation\" */ \"../../../component/nav/MainNavigation\"\n  )\n);\nconst NearbyLists = lazy(() =>\n  import(/* webpackChunkName: \"NearbyLists\" */ \"./NearbyLists\")\n);\n\ninterface Props {\n  loadStopData: LoadStopData;\n  loading: boolean;\n  stopLocations: StopLocationsDictionary;\n  nearbyRoutes: RouteDirectionDict;\n  currentLocation: number[];\n  numberOfBookmarks: number;\n  timeOfLastLoad: string;\n  onInitialLoad: () => void;\n  match: any;\n}\n\ninterface State {\n  modalOpen: boolean;\n  routeInfo: Route;\n}\n\nexport default class NearbyTransitViewComponent extends React.Component<\n  Props,\n  State\n> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalOpen: false,\n      routeInfo: null\n    };\n\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  public componentDidMount() {\n    this.props.onInitialLoad();\n\n    const { loadStopData } = this.props;\n\n    if (loadStopData) {\n      loadStopData(1000);\n    }\n  }\n\n  public render() {\n    const { numberOfBookmarks, timeOfLastLoad } = this.props;\n\n    return (\n      <div>\n        <MainNavigation\n          numberOfBookmarks={numberOfBookmarks}\n          timeOfLastLoad={timeOfLastLoad}\n        />\n        {this.getNearbyStops()}\n      </div>\n    );\n  }\n\n  public closeModal() {\n    this.setState({\n      modalOpen: false,\n      routeInfo: null\n    });\n  }\n\n  public openModal(route: Route) {\n    this.setState({\n      modalOpen: true,\n      routeInfo: route\n    });\n  }\n\n  private getNearbyStops() {\n    const { loading = true, stopLocations } = this.props;\n\n    return (\n      <main className=\"main-view\">\n        <div id=\"nearby-stops-view-component\">\n          {!loading && stopLocations && this.nearbyStops()}\n        </div>\n      </main>\n    );\n  }\n\n  private nearbyStops() {\n    const { stopLocations, currentLocation, nearbyRoutes } = this.props;\n\n    /*tslint:disable:jsx-no-lambda*/\n    return (\n      <div className=\"nearby-stops\">\n        <main>\n          <div className=\"flex-container\">\n            <section className=\"flex-stops\">\n              <Suspense fallback={MapLoadIndicator()}>\n                <NearbyStopsMap\n                  currentLocation={currentLocation}\n                  stopLocations={stopLocations}\n                  nearbyRoutes={nearbyRoutes}\n                />\n              </Suspense>\n              <Suspense fallback={ComponentLoadIndicator()}>\n                <NearbyLists\n                  stopLocations={stopLocations}\n                  openModal={this.openModal}\n                  nearbyRoutes={nearbyRoutes}\n                />\n              </Suspense>\n            </section>\n            {this.state.modalOpen && this.showModal()}\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  private showModal() {\n    return (\n      <div className=\"flex-info\">\n        <aside id=\"modal-root\" className=\"modal-wrapper\" />\n        <Modal>\n          <ModalContent\n            route={this.state.routeInfo}\n            closeModal={this.closeModal}\n          />\n        </Modal>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport FontAwesome from \"react-fontawesome\";\nimport \"./RouteLoadIndicator.scss\";\n\nexport default function MapLoadIndicator() {\n  return (\n    <div className=\"load-indicator map-indicator\">\n      <FontAwesome name=\"spinner\" size=\"lg\" spin={true} />\n      Loading map!\n    </div>\n  );\n}\n","import { connect } from \"react-redux\";\nimport { loadStopDataRequest } from \"../../../store/action/stopActions\";\nimport { onInitialLoadRequest } from \"../../../store/action/viewActions\";\nimport { RootState } from \"../../../store/reducers\";\nimport { bookmarkCountSelector } from \"../../../store/selectors/bookmarkSelectors\";\nimport { currentLocationSelector } from \"../../../store/selectors/locationSelectors\";\nimport {\n  allNearbyRoutesSelector,\n  allStopLocationsSelector,\n  stopsLoadingSelector,\n  timeOfLastLoadSelector\n} from \"../../../store/selectors/stopSelectors\";\nimport NearbyTransitViewComponent from \"../components/NearbyTransitViewComponent\";\n\nconst mapStateToProps = (state: RootState) => {\n  return {\n    currentLocation: currentLocationSelector(state),\n    loading: stopsLoadingSelector(state),\n    nearbyRoutes: allNearbyRoutesSelector(state),\n    numberOfBookmarks: bookmarkCountSelector(state),\n    stopLocations: allStopLocationsSelector(state),\n    timeOfLastLoad: timeOfLastLoadSelector(state)\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadStopData(radiusInFeet: number): void {\n      dispatch(loadStopDataRequest(radiusInFeet));\n    },\n    onInitialLoad() {\n      dispatch(onInitialLoadRequest());\n    }\n  };\n};\n\nconst NearbyTransitViewContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NearbyTransitViewComponent);\n\nexport default NearbyTransitViewContainer;\n"],"sourceRoot":""}